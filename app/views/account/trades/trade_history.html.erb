<div class="container-xxl flex-grow-1 container-p-y">
	<h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Trade /</span> Recent Trades</h4>
	<div class="row">
		<div class="card">
			<div class="col-md-3">
			</div>
			<div class="table-responsive text-nowrap">
				<table class="table table-striped mb-3">
					<thead>
						<tr>
							<th>Ref No</th>
							<th>Amount</th>
							<th>Currency Pair</th>
							<th>Duration</th>
							<th>Date</th>
							<th>Trade Type</th>
							<th>Profit/Loss</th>
							<th>Status</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody class="table-border-bottom-0">
						<% if @trades.present? %>
							<% @trades.each do |trade| %>
								<tr>
									<td><strong><%= trade.order_id %></strong></td>
									<td><%= number_to_currency(trade.amount, precision: 2) %></td>
									<td><%= trade.currency_pair.base_currency %> / <%= trade.currency_pair.quote_currency %></td>
									<td><%= trade.time_duration %></td>
									<td><%= trade.created_at.strftime("	%d-%m-%Y ") %> </td>
									<td>
										<% if trade.trade_type == "buy" %>
											<span class="badge bg-label-success me-1"><%= trade.trade_type %></span>
										<% elsif trade.trade_type == "sell" %>
											<span class="badge bg-label-danger me-1"><%= trade.trade_type %></span>
										<% end %>
									</td>
									<td>
										<% if trade.status == "completed" %>
											<%= number_to_currency(trade.profit_loss, precision: 2) %>
										<% else %>
											$-.--
										<% end %>
									</td>
									<td><span class="badge bg-label-info me-1"><%= trade.status %></span></td>
									<td>
										<%= form_with(url: account_cancel_trade_path(trade), method: :post, data: { turbo_confirm: 'Are you sure you want to cancel this trade?' }) do |form| %>
											<% if trade.status == "completed" %>
												<button type="submit" turbo-confirm="You might lose your trade if you cancle now" class="btn btn-sm btn-danger disabled">
													<span class="tf-icons bx bx-candles"></span>&nbsp; completed
												</button>
											<% else %>
												<button type="submit" turbo-confirm="You might lose your trade if you cancle now" class="btn btn-sm btn-outline-danger">
													<span class="tf-icons bx bx-candles"></span>&nbsp; Cancel Trade
												</button>
											<% end %>
										<% end %>
									</td>
								</tr>
							<% end %>
						<% else %>
							<tr >
								<td colspan="9" class="text-center">No trade yet </td>
							</tr>
						<% end %>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<%# pagination %>
	<%= render 'account/shared/pagy', locals: {pagy: @pagy} %>
</div>
